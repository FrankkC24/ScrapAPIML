{"version":3,"file":"fullGroup.js","sourceRoot":"","sources":["../../src/modules/fullGroup.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAuC;AAGvC,mCAAyC;AAElC,MAAM,gBAAgB,GAAG,KAAK,EAAE,IAAY,EAAmB,EAAE;IACtE,MAAM,OAAO,GAAY,MAAM,SAAS,CAAC,MAAM,CAAC;QAC9C,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,CAAC,eAAe,EAAE,yBAAyB,EAAE,0BAA0B,EAAE,cAAc,EAAE,aAAa,CAAC;KAC9G,CAAC,CAAC;IAEH,MAAM,IAAI,GAAS,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;IAE3C,IAAI,CAAC;QACH,MAAM,IAAA,sBAAc,EAAC,IAAI,CAAC,CAAC;QAC3B,MAAM,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,SAAS,EAAE,kBAAkB,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QACxE,MAAM,IAAI,CAAC,eAAe,CAAC,+BAA+B,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC;QAE9F,OAAO,aAAa,CAAC;IACvB,CAAC;IAAC,OAAO,KAAU,EAAE,CAAC;QACpB,IAAI,CAAC;YACH,MAAM,IAAI,CAAC,eAAe,CAAC,gCAAgC,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC;YAC9F,OAAO,qBAAqB,CAAC;QAC/B,CAAC;QAAC,OAAO,eAAoB,EAAE,CAAC;YAC9B,IAAI,CAAC;gBACH,MAAM,IAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC;gBACnF,OAAO,sBAAsB,CAAC;YAChC,CAAC;YAAC,OAAO,YAAiB,EAAE,CAAC;gBAC3B,OAAO,mBAAmB,CAAC;YAC7B,CAAC;oBAAS,CAAC;gBACT,IAAI,IAAI,EAAE,CAAC;oBACT,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC;gBACxB,CAAC;gBAAA,CAAC;YACJ,CAAC;YAAA,CAAC;QACJ,CAAC;QAAA,CAAC;IACJ,CAAC;IAAA,CAAC;AACJ,CAAC,CAAC;AA/BW,QAAA,gBAAgB,oBA+B3B","sourcesContent":["import * as puppeteer from 'puppeteer';\r\nimport { Page, Browser } from 'puppeteer';\r\n\r\nimport { loginToSpotify } from './login';\r\n\r\nexport const checkGroupStatus = async (link: string): Promise<string> => {\r\n  const browser: Browser = await puppeteer.launch({\r\n    headless: 'new',\r\n    args: ['--disable-gpu', '--disable-dev-shm-usage', '--disable-setuid-sandbox', '--no-sandbox', '--incognito'],\r\n  });\r\n\r\n  const page: Page = await browser.newPage();\r\n  \r\n  try {\r\n    await loginToSpotify(page);\r\n    await page.goto(link, { waitUntil: 'domcontentloaded', timeout: 3000 });\r\n    await page.waitForSelector('#plan-already-full-error-page', { visible: false, timeout: 500 });\r\n  \r\n    return 'Grupo lleno';\r\n  } catch (error: any) {\r\n    try {\r\n      await page.waitForSelector('#invitation-expired-error-page', { visible: true, timeout: 500 });\r\n      return 'Invitación expirada';\r\n    } catch (expirationError: any) {\r\n      try {\r\n        await page.waitForSelector('#general-error-page', { visible: true, timeout: 500 });\r\n        return 'Invitación no válida';\r\n      } catch (invalidError: any) {\r\n        return 'Grupo con espacio';\r\n      } finally {\r\n        if (page) {\r\n          await browser.close();\r\n        };\r\n      };\r\n    };\r\n  };\r\n};\r\n"]}